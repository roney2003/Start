"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6533],{25382:function(e,t,n){n.d(t,{IQ:function(){return u},UU:function(){return l}});var r=n(85893),i=n(87357),o=n(51233),a=n(60076),s=n(22715),c=n(67294),d=n(86896);function l(e){return(0,c.useEffect)(function(){},[]),(0,r.jsx)(i.Z,{component:"div",className:e.checkoutClassName,sx:{border:"1px solid #D9D9D9",borderRadius:"5px",marginTop:"8px",padding:"14.9px 16px",maxWidth:e.maxWidth,backgroundColor:"#F4F9FF",height:"51px",":hover":{border:"1px solid #000000"}}})}function u(e){var t=function(e){l&&l(e.target.value)},n=e.id,i=e.name,c=e.value,l=e.onChange,u=e.labelTId,p=(e.endIcon,e.placeholder),x=e.type,h=(e.disabled,e.required),m=(e.variant,e.multiline,e.rows,e.fullWidth),f=(0,d.Z)().formatMessage;return(0,r.jsxs)(o.Z,{spacing:1,sx:{width:m&&"100%"},children:[(0,r.jsx)(a.Z,{id:"".concat(n,"__label"),sx:{color:"text.darkGrey"},required:h,children:f({id:u})}),(0,r.jsx)(s.Z,{sx:{"& .MuiOutlinedInput-root":{boxShadow:"none","& fieldset":{border:"1px solid #D9D9D9",boxShadow:"none"},"&:hover fieldset":{border:"1px solid #000000",boxShadow:"none"},"&.Mui-focused fieldset":{border:"1px solid #000000",boxShadow:"none"}}},id:n,name:i,type:x,placeholder:p,fullWidth:m,value:c,onChange:t})]})}},5641:function(e,t,n){n.d(t,{Z:function(){return D}});var r,i=n(47568),o=n(26042),a=n(69396),s=n(97582),c=n(85893),d=n(62176),l=n(48263),u=n(66489),p=n(51233),x=n(12509),h=n(1691),m=n(23972),f=n(69397),g=n(87357),y=n(67294),j=n(71018),b=n(35559);(0,i.Z)(function(e){var t;return(0,s.__generator)(this,function(n){switch(n.label){case 0:return[4,b.Z.post("api/payment/CreateCustomer",e,{headers:{Accept:"application/json"}}).catch(function(e){return console.log(e),!1})];case 1:if((t=n.sent()).data)return[2,t.data];return[2,!1]}})});var Z=n(86896),F=n(44012),v=n(11163),C=n(53892),S=n(66802),k=n(59896),w=n(26811),I=n(8600),T=n(10511),A=n(91717),P=n(25382),W=n(17013),z=n(65851),M=n(77577),_=n(75661);function D(e){e.onSubmit,e.personInformation;var t=(0,T.CJ)().isMobile,n=(0,v.useRouter)(),r=(0,y.useState)(""),b=r[0],D=r[1],N=(0,y.useState)(!1),R=N[0],E=N[1],H=(0,y.useState)(!1),L=H[0],U=H[1],q=(0,y.useContext)(j.Vo).authMethods,B=(0,Z.Z)().formatMessage,V=(0,C.NT)().tmpDocument,G=(0,y.useContext)(w.R).funnelInfo,Q=(0,y.useState)(""),J=Q[0],K=Q[1],O=(0,W.bU)(),Y=O.locale,X=O.country,$=(0,y.useState)(!1),ee=$[0],et=$[1],en=(0,y.useState)(),er=en[0],ei=en[1],eo=(0,y.useState)(),ea=eo[0],es=eo[1],ec=(0,y.useState)(),ed=ec[0],el=ec[1],eu=(0,y.useState)(!1),ep=eu[0],ex=eu[1],eh=(0,y.useState)({acceptedTerms:!1,searchInput:void 0}),em=eh[0],ef=eh[1],eg=function(){ef((0,a.Z)((0,o.Z)({},em),{acceptedTerms:!em.acceptedTerms}))},ey=e.loading||ep?(0,c.jsx)(l.ZP,{container:!0,direction:"row",alignItems:"center",justifyContent:"center",children:(0,c.jsx)(u.Z,{size:20,style:{color:"#ffffff"}})}):(0,c.jsx)(F.Z,{id:"payment.button"}),ej=(0,y.useState)(1),eb=ej[0],eZ=ej[1],eF=function(t){es(t);var n={email:G.email,paymentToken:t,state:G.selectedSubscription,country:X};(0,z.VE)(n).then(function(e){el(e.id),ei(e.links.redirect.href),et(!0)}).catch(function(t){e.setLoading(!1),D(B({id:"error.paymentError"})),E(!0),ex(!1)})},ev=function(t){et(!1);var r,o=localStorage.getItem("gclid"),a=localStorage.getItem("msclkid"),c={email:G.email,firstName:G.firstname,lastName:G.lastname,state:G.selectedSubscription,locale:Y,country:X,threeDSecureToken:t,paymentId:ed,creditCardToken:ea,gclid:o,msclkid:a};(0,z.zA)(c).then((r=(0,i.Z)(function(e){var t;return(0,s.__generator)(this,function(r){switch(r.label){case 0:if(ex(!1),q.login(e.user,e.token,e.user.isSubscribed),!0!=G.register)return[3,1];return n.push("/dashboard"),[3,5];case 1:return r.trys.push([1,3,,4]),[4,(0,S.BR)({accessToken:e.token},V)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),console.log(t),[3,4];case 4:n.push("/confirm"),r.label=5;case 5:return[2]}})}),function(e){return r.apply(this,arguments)})).catch(function(t){e.setLoading(!1),D(B({id:"error.paymentError"})),E(!0),ex(!1)})},eC=function(e){e.preventDefault(),n.push("/privacy-policy")},eS=function(t){if(t.preventDefault(),E(!1),U(!1),!d.Frames.isCardValid()||null==J||""==J){e.setLoading(!1),D(B({id:"error.dataEmptyError"})),U(!0);return}if(!em.acceptedTerms){e.setLoading(!1),D(B({id:"error.acceptUseTerms"})),U(!0);return}d.Frames.submitCard(),ex(!0)},ek=function(){D(null),E(!1),U(!1),K(null)};return(0,c.jsxs)(p.Z,{sx:{width:{xs:"100%",md:"400px"},marginRight:{xs:"0px",md:"44px"}},children:[(R||L)&&(0,c.jsxs)(x.Z,{in:R||L,sx:{padding:"32px 0px 20px"},children:[(0,c.jsx)(h.Z,{style:{marginBottom:"15px"},severity:"error",action:(0,c.jsx)("i",{className:"fas fa-times",style:{color:"inherit",cursor:"pointer"}}),children:b}),R&&(0,c.jsx)(_.Z,{variant:"contained",color:"secondary",tId:"dashboard.info.paymentMethod.retry",sx:{alignSelf:"end"},onClick:function(e){return ek()}})]}),!R&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(d.Frames,{config:{publicKey:"pk_kx3wtuhoj3b6i3gh3w2fj7teamu",cardholder:{name:J},localization:{cardNumberPlaceholder:B({id:"payment.placeholders.cardNumber"}),expiryMonthPlaceholder:B({id:"payment.placeholders.month"}),expiryYearPlaceholder:B({id:"payment.placeholders.year"}),cvvPlaceholder:B({id:"payment.placeholders.cvv"})},style:{base:{color:"#020D3E",fontFamily:"sans-serif",fontSize:"16px",backgroundColor:"#F4F9FF",letterSpacing:"normal"},placeholder:{base:{color:"#95989c",backgroundColor:"#F4F9FF"}},invalid:{color:"red"}}},cardTokenized:function(e){eF(e.token)},children:[(0,c.jsx)(g.Z,{w:"100%",backgroundColor:"white",borderRadius:"12px",p:"32px 0px 20px",children:(0,c.jsxs)(p.Z,{children:[(0,c.jsx)(l.ZP,{container:!0,spacing:2,children:(0,c.jsxs)(l.ZP,{item:!0,xs:12,md:12,children:[(0,c.jsxs)(p.Z,{direction:{xs:"column",md:"row"},rowGap:"16px",columnGap:"24px",children:[(0,c.jsx)(M.aB,{number:1,cardSelected:eb,setCardSelected:eZ}),(0,c.jsx)(M.iq,{number:2,cardSelected:eb,setCardSelected:eZ})]}),(0,c.jsxs)(l.ZP,{container:!0,spacing:2,sx:{mt:{xs:"16px",md:"15px"}},children:[(0,c.jsxs)(l.ZP,{item:!0,xs:12,md:8,children:[(0,c.jsx)(k.Z,{tId:"payment.cardNumber",variant:"body2",color:"#656565"}),(0,c.jsx)(P.UU,{maxWidth:"100%",checkoutClassName:"card-number-frame"})]}),(0,c.jsxs)(l.ZP,{item:!0,xs:6,md:4,children:[(0,c.jsx)(k.Z,{tId:"payment.expiration",variant:"body2",color:"#656565"}),(0,c.jsx)(P.UU,{maxWidth:"100%",checkoutClassName:"expiry-date-frame"})]}),(0,c.jsx)(l.ZP,{item:!0,xs:12,md:8,order:{xs:4,md:3},children:(0,c.jsx)(P.IQ,{id:"cardHolder",name:"cardHolder",value:J,onChange:function(e){return K(e)},labelTId:"dashboard.info.paymentMethod.fields.cardHolder",placeholder:B({id:"dashboard.info.paymentMethod.fields.cardHolder"})})}),(0,c.jsxs)(l.ZP,{item:!0,xs:6,md:4,order:{xs:3,md:4},children:[(0,c.jsx)(k.Z,{tId:"payment.cvc",variant:"body2",color:"#656565"}),(0,c.jsx)(P.UU,{maxWidth:"100%",checkoutClassName:"cvv-frame"})]})]})]})}),(0,c.jsxs)(g.Z,{sx:{mt:"20px",maxWidth:"100%"},children:[(0,c.jsx)(I.Z,{sx:{"& .MuiSvgIcon-root":{fontSize:24}},checked:em.acceptedTerms,onChange:function(){return eg()},name:"checkedB",color:"primary",label:(0,c.jsxs)(m.Z,{variant:"body2",fontSize:{xs:"11px",md:"14px"},sx:{marginLeft:{xs:"7px !important",md:"24px"}},color:"#A4A4A4",children:[(0,c.jsx)(F.Z,{id:"payment.paymentCheckInPart1"}),t?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("span",{style:{fontWeight:"700"},children:[(0,c.jsx)(F.Z,{id:"payment.paymentCheckInPart2Mobile"}),"\xa0"]}),(0,c.jsxs)("span",{style:{fontWeight:"700"},onClick:function(e){return eC(e)},children:[(0,c.jsx)(F.Z,{id:"payment.paymentCheckInPart21Mobile"}),"\xa0"]})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("span",{style:{fontWeight:"700"},children:[(0,c.jsx)(F.Z,{id:"payment.paymentCheckInPart2"}),"\xa0"]}),(0,c.jsxs)("span",{style:{fontWeight:"700"},onClick:function(e){return eC(e)},children:[(0,c.jsx)(F.Z,{id:"payment.paymentCheckInPart21"}),"\xa0"]}),(0,c.jsx)("span",{children:(0,c.jsx)(F.Z,{id:"payment.paymentCheckInPart3"})})]})]})}),(0,c.jsx)(k.Z,{tId:"payment.allPriceAreTaxIncluded",sx:{marginLeft:"32px",marginTop:{xs:"8px",md:"12px"},fontFamily:"Tondo",fontWeight:600,fontSize:{xs:"7px",md:"9px"},lineHeight:"12px",color:"#141414"}})]})]})}),(0,c.jsx)(p.Z,{direction:"row",children:(0,c.jsx)(f.Z,{variant:"contained",color:"secondary",sx:{width:"100%",minWidth:"140px",ml:"auto",mr:{xs:"auto",md:0},height:"48px"},onClick:function(e){return eS(e)},type:"submit",children:ey})}),t&&(0,c.jsx)(A.Z,{selected:3})]}),(0,c.jsx)(M.b4,{open:ee,url:er,onClose:ev})]})]})}},77577:function(e,t,n){n.d(t,{aB:function(){return u},b4:function(){return x},iq:function(){return p}});var r=n(85893),i=n(51233),o=n(23972),a=n(64666),s=n(87357),c=n(59896),d=n(28500),l=n(67294),u=function(e){var t=e.cardSelected,n=e.setCardSelected,o=function(){return t==e.number};return(0,r.jsxs)(i.Z,{onClick:function(){return n(e.number)},direction:"row",alignItems:"center",justifyContent:"center",sx:{padding:"15px 20px",backgroundColor:o()?"#F4F9FF":"#FFFFFF",border:o()?"1px solid #F4F9FF":"1px solid #D9D9D9",borderRadius:"5px",cursor:"pointer"},children:[(0,r.jsx)(d.ci,{color:o()?"#5158F5":"#A4A4A4"}),(0,r.jsx)(c.Z,{tId:"payment.creditCard",sx:{fontFamily:"Tondo",fontWeight:700,fontSize:"14px",lineHeigh:"17px",color:o()?"#5158F5":"#A4A4A4",marginLeft:"11px"}})]})},p=function(e){var t=e.cardSelected,n=e.setCardSelected,a=function(){return t==e.number};return(0,r.jsxs)(i.Z,{onClick:function(){return n(e.number)},direction:"row",alignItems:"center",justifyContent:"center",sx:{padding:"15px 20px",backgroundColor:a()?"#F4F9FF":"#FFFFFF",border:a()?"1px solid #F4F9FF":"1px solid #D9D9D9",borderRadius:"5px",cursor:"pointer"},children:[(0,r.jsx)(d.LT,{color:a()?"#5158F5":"#A4A4A4"}),(0,r.jsx)(o.Z,{id:"payment.creditCard",sx:{fontFamily:"Tondo",fontWeight:700,fontSize:"14px",lineHeigh:"17px",color:a()?"#5158F5":"#A4A4A4",marginLeft:"11px"},children:"American Express"})]})},x=function(e){var t=e.onClose,n=e.open,i=e.url,o=(0,l.useRef)(),c=function(){},d=function(){try{var e,n,r,i=null==o?void 0:null===(e=o.current)||void 0===e?void 0:null===(n=e.contentWindow)||void 0===n?void 0:null===(r=n.location)||void 0===r?void 0:r.search;setTimeout(function(){t(i.split("=")[1])},3e3)}catch(a){console.log(a)}};return(0,r.jsx)(a.Z,{onClose:c,open:n,fullScreen:!0,sx:{"& .MuiPaper-root":{height:"100vh",overflow:"hidden"}},children:(0,r.jsx)(s.Z,{sx:{height:"100%",width:"100%"},children:(0,r.jsx)("iframe",{name:"threeDSecureIframe",src:i,onLoad:d,ref:o,style:{width:"100%",height:"100%"}})})})}},46533:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(85893),i=n(59896),o=n(60454),a=n(26811),s=n(10511),c=n(51233),d=n(87357),l=n(66489),u=n(23972),p=n(67294),x=n(36349),h=n(77923),m=n(17013),f=n(5641);function g(){var e=(0,p.useContext)(a.R),t=e.funnelInfo;e.setFunnelInfo;var n=(0,p.useState)(0),g=n[0],y=n[1],j=(0,s.CJ)().isMobile,b=(0,m.bU)(),Z=(b.country,b.trialPrice),F=b.monthlyPrice;b.annualPrice;var v=(0,p.useState)(!1),C=v[0],S=v[1],k=(0,p.useState)(!1),w=k[0],I=k[1];return(0,p.useEffect)(function(){null!=t&&null!=t.selectedSubscription&&y(t.selectedSubscription);var e=localStorage.getItem("gclid"),n=localStorage.getItem("msclkid");(e||n)&&I(!0),localStorage.getItem("clid")&&I(!0)},[]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(o.Z,{imageMinHeight:"590px",hideThumbnail:j||t.register,hideMenuBars:!0,showPaymentCards:!0,children:(0,r.jsxs)(c.Z,{direction:"row",sx:{padding:{xs:"32px",md:"40px"},maxWidth:"98%",width:{xs:"98%",md:"auto"},backgroundColor:"#FFFFFF",minHeight:"590px",height:"100%",boxShadow:"3px 3px 6px rgba(0, 0, 0, 0.07)",borderRadius:"10px",position:"relative"},children:[C&&(0,r.jsx)(d.Z,{sx:{position:"absolute",left:0,right:0,marginLeft:"auto",marginRight:"auto",top:100},children:(0,r.jsx)(c.Z,{sx:{width:"100%",height:"100%"},alignItems:"center",justifyContent:"center",children:(0,r.jsx)(l.Z,{})})}),(0,r.jsxs)(c.Z,{direction:"column",sx:{borderRight:{xs:"none",md:"1px solid #EFEFEF"},visibility:C?"hidden":"visible"},children:[(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(i.Z,{tId:"payment.title",sx:{fontFamily:"Mundial",fontWeight:600,fontSize:{xs:"20px",md:"30px"},color:"#5158F5"}}),(0,r.jsx)(i.Z,{tId:"payment.price2",tValues:{price:Z},sx:{fontFamily:"Mundial",fontWeight:600,fontSize:"24px",lineHeight:"30px",color:"#FFFFFF",backgroundColor:"#5158F5",marginTop:{xs:"16px",md:"32px"},padding:"7px 12px 10px 12px",borderRadius:"8px",display:"inline-block"}})]}),(0,r.jsx)(f.Z,{paymentState:g,loading:C,setLoading:S})]}),!j&&(0,r.jsxs)(c.Z,{direction:"column",sx:{marginLeft:"40px",maxWidth:"225px",visibility:C?"hidden":"visible"},children:[(0,r.jsx)(i.Z,{tId:"payment.resume.title",sx:{fontFamily:"Mundial",fontWeight:600,fontSize:"26px",color:"#5158F5"}}),(0,r.jsxs)(d.Z,{sx:{margin:"18px 15px 0px 15px"},children:[(0,r.jsx)(i.Z,{tId:"payment.resume.resumeAndCreate",sx:{fontFamily:"Tondo",fontWeight:700,fontSize:"14px",lineHeight:"17px",color:"#141414"}}),(0,r.jsxs)(d.Z,{sx:{marginTop:"16px"},children:[(0,r.jsx)(i.Z,{tId:"payment.resume.email",sx:{fontFamily:"Tondo",fontWeight:400,fontSize:"14px",lineHeight:"17px",color:"#747474"}}),(0,r.jsx)(u.Z,{sx:{fontFamily:"Tondo",fontWeight:400,fontSize:"14px",lineHeight:"17px",color:"#747474"},suppressHydrationWarning:!0,children:null==t?void 0:t.email})]}),(0,r.jsx)(i.Z,{tId:"payment.resume.completeAcces",sx:{fontFamily:"Tondo",fontWeight:700,fontSize:"14px",lineHeight:"17px",color:"#141414",marginTop:"24px"}})]}),(0,r.jsx)(h.Z,{}),w?(0,r.jsx)(i.Z,{tId:"payment.resume.mensualPrice",tValues:{price:F,trialPrice:Z},sx:{fontFamily:"Tondo",fontWeight:400,fontSize:{xs:"11px",md:"13px"},lineHeight:{xs:"13.5px",md:"17px"},color:"#A4A4A4",marginTop:"10px"}}):(0,r.jsx)(x.Z,{selected:g,chooseSelected:y})]})]})})})}},8600:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(85893),i=n(67294),o=n(28500),a=n(2734),s=n(51233),c=n(87357),d=n(60076),l=n(86896);function u(e){var t=(0,i.useState)(!1),n=t[0],u=t[1],p=e.id,x=e.name,h=e.checked,m=void 0===h?n:h,f=e.onChange,g=void 0===f?u:f,y=e.labelTId,j=e.required,b=(0,l.Z)().formatMessage,Z=(0,a.Z)(),F=m?Z.palette.primary.main:Z.palette.text.grey;return(0,r.jsxs)(s.Z,{direction:"row",alignItems:"center",spacing:3,sx:{cursor:"pointer","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"},children:[(0,r.jsxs)(c.Z,{sx:{position:"relative"},children:[(0,r.jsx)("input",{type:"checkbox",id:p,name:x,value:m,required:j,style:{appearance:"none","-webkit-appearance":"none","-moz-appearance":"none",height:"18px",width:"18px",backgroundColor:"white",border:"2px solid",color:F,borderColor:F,borderRadius:"3px",cursor:"pointer"},onChange:function(e){return g(!m)}}),m&&(0,r.jsx)(o.nQ,{sx:{position:"absolute",top:"6px",left:"7px",height:"12px",width:"12px",color:F,pointerEvents:"none"}})]}),e.label?e.label:(0,r.jsx)(d.Z,{htmlFor:x,id:"".concat(p,"__label"),sx:{color:"text.darkGrey",cursor:"pointer",whiteSpace:"pre-wrap"},children:b({id:y})})]})}},65851:function(e,t,n){n.d(t,{Nj:function(){return u},VE:function(){return p},oq:function(){return l},zA:function(){return x}});var r,i,o,a,s=n(47568),c=n(97582),d=n(35559),l=(r=(0,s.Z)(function(e,t){var n;return(0,c.__generator)(this,function(r){switch(r.label){case 0:return[4,d.Z.post("api/Checkout/CreatePaymentRequestForNewCard",t,{headers:{Authorization:"Bearer "+e.accessToken,Accept:"application/json"}}).catch(function(e){throw e})];case 1:if((n=r.sent()).data)return[2,n.data];return[2,!1]}})}),function(e,t){return r.apply(this,arguments)}),u=(i=(0,s.Z)(function(e,t){var n;return(0,c.__generator)(this,function(r){switch(r.label){case 0:return[4,d.Z.post("api/Checkout/ValidateThreeDSecureForNewCard",t,{headers:{Authorization:"Bearer "+e.accessToken,Accept:"application/json"}}).catch(function(e){throw e})];case 1:if((n=r.sent()).data)return[2,n.data];return[2,!1]}})}),function(e,t){return i.apply(this,arguments)}),p=(o=(0,s.Z)(function(e){var t;return(0,c.__generator)(this,function(n){switch(n.label){case 0:return[4,d.Z.post("api/Checkout/CreatePaymentRequest",e,{headers:{Accept:"application/json"}}).catch(function(e){throw e})];case 1:if((t=n.sent()).data)return[2,t.data];return[2,!1]}})}),function(e){return o.apply(this,arguments)}),x=(a=(0,s.Z)(function(e){var t;return(0,c.__generator)(this,function(n){switch(n.label){case 0:return[4,d.Z.post("api/Checkout/ValidateThreeDSecure",e,{headers:{Accept:"application/json"}}).catch(function(e){throw e})];case 1:if((t=n.sent()).data)return[2,t.data];return[2,!1]}})}),function(e){return a.apply(this,arguments)})}}]);